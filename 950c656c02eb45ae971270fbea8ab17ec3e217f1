{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "a3e6ca70_2e3fe07e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-11-20T15:59:20Z",
      "side": 1,
      "message": "Nice catch!",
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3c8a1ba_fef36c01",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 1
      },
      "lineNbr": 110,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-11-21T09:58:52Z",
      "side": 1,
      "message": "Thinking further, I think this error code should be RSI_INCOMPLETE ?",
      "range": {
        "startLine": 110,
        "startChar": 22,
        "endLine": 110,
        "endChar": 33
      },
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9c27a24_e00473c6",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-11-20T15:59:20Z",
      "side": 1,
      "message": "I think adding an \u0027out_unlock\u0027 label at the end of the function and using goto here would fit more in the pattern used in this file.",
      "range": {
        "startLine": 112,
        "startChar": 2,
        "endLine": 112,
        "endChar": 31
      },
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f9e368ec_373116da",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-11-20T16:06:05Z",
      "side": 1,
      "message": "It just occurred to me that the unlocking could be eliminated if this was the first check, before calling realm_ipa_to_pa. \n\nI see that you suggested this location: https://review.trustedfirmware.org/c/TF-RMM/tf-rmm/+/23721/comment/e9de3da3_9299a85b/\n\nDoes this need to be checked after the lock is held?",
      "parentUuid": "a9c27a24_e00473c6",
      "range": {
        "startLine": 112,
        "startChar": 2,
        "endLine": 112,
        "endChar": 31
      },
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8699c7a_36c5e763",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-11-20T16:11:19Z",
      "side": 1,
      "message": "The realm_ipa_to_pa checks the validity of the ipa from realm world. Since we should return error if the IPA is wrong, it maybe incorrect to return SUCCESS if size \u003d\u003d 0. hence the need to check ipa first and the side-effect of having the lock acquired.\n\nI can change to the pattern you suggested.",
      "parentUuid": "f9e368ec_373116da",
      "range": {
        "startLine": 112,
        "startChar": 2,
        "endLine": 112,
        "endChar": 31
      },
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cdda4389_c2c2b8ef",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-11-21T07:34:59Z",
      "side": 1,
      "message": "Makes sense, thanks.",
      "parentUuid": "b8699c7a_36c5e763",
      "range": {
        "startLine": 112,
        "startChar": 2,
        "endLine": 112,
        "endChar": 31
      },
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "867ee6ac_29f458ae",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 1
      },
      "lineNbr": 112,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-11-21T09:58:52Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cdda4389_c2c2b8ef",
      "range": {
        "startLine": 112,
        "startChar": 2,
        "endLine": 112,
        "endChar": 31
      },
      "revId": "950c656c02eb45ae971270fbea8ab17ec3e217f1",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}