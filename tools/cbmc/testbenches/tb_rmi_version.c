/*
 * SPDX-License-Identifier: BSD-3-Clause
 * SPDX-FileCopyrightText: Copyright TF-RMM Contributors.
 *
 * This file was AUTOGENERATED from the RMM specification.
 * RMM specification source version: 790fd539
 */

#include "tb.h"
#include "tb_rmi_version.h"

bool tb_rmi_version(
	rmi_interface_version_t req)
{
	/*
	 * Initialize registers
	 */

	struct tb_regs __tb_regs = __tb_arb_regs();

	__tb_regs.X0 = SMC_RMM_VERSION;
	__tb_regs.X1 = (uint64_t)req;

	/*
	 * Initialize global state
	 */

	__init_global_state(__tb_regs.X0);

	/*
	 * Pre-conditions
	 */

	bool no_failures_pre = true;

	/*
	 * Execute command and read the result.
	 */

	tb_handle_smc(&__tb_regs);
	uint64_t result = __tb_regs.X0;
	uint64_t lower = __tb_regs.X1;
	uint64_t higher = __tb_regs.X2;

	/*
	 * Assertion used to check consistency of the testbench
	 */
	__tb_expect_fail();

	return no_failures_pre;
}
