{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "b5c47974_daa32bea",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2024-07-17T16:59:40Z",
      "side": 1,
      "message": "This is a kind of slight repetition of code in caller of this function but there was a TODO to remove the init from caller.\n\nI think generally the attest state should not be changed from outside the attest module and it maybe possible to abstract the state machine and its manipulation within this module. Some refactor would be needed. Perhaps we can work on the refactor internally.",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd8a5e5f_2afbc07a",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-07-17T17:58:21Z",
      "side": 1,
      "message": "thx, can you point me to repetition? goal of this function was to remove some of the code in callers and move it to attest module, and it is convenient to abstract state machine and initialize context...",
      "parentUuid": "b5c47974_daa32bea",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7298d6ac_f0566aae",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2024-07-18T10:57:32Z",
      "side": 1,
      "message": "The state is being reset to NOT_STARTED here : https://github.com/TF-RMM/tf-rmm/blob/main/runtime/rsi/realm_attest.c#L194 which is also being done in the _init() function.\n\nYour patch is in the right direction. I think we have a bit of technical debt to move all of token_sign_ctx.state manipulation and checks to the component. It may need a bit of refactor.",
      "parentUuid": "cd8a5e5f_2afbc07a",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4168e558_2e85bc33",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-07-18T15:16:42Z",
      "side": 1,
      "message": "yep, i can fix that line, i can simply call attest_token_reset_state and we should be good?",
      "parentUuid": "7298d6ac_f0566aae",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e836d29_8f7308b8",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2024-07-19T10:14:53Z",
      "side": 1,
      "message": "I think a refactor of the attestation APIs would be needed to move the state management internal to the component. I have a pushed a patch here to do the same : https://review.trustedfirmware.org/c/TF-RMM/tf-rmm/+/30050",
      "parentUuid": "4168e558_2e85bc33",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0ba0784_ef9beee2",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-07-19T15:23:20Z",
      "side": 1,
      "message": "happy to rebase on top of that change, looks good.",
      "parentUuid": "8e836d29_8f7308b8",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26737b32_11cc844f",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2024-07-22T15:24:11Z",
      "side": 1,
      "message": "OK, the changes can be rebased on that. There is a TF-X test failing with that patch , so that will need to be fixed as well . \n\nBeing holiday season, many folks (including me) are on holiday, so things may move slowly for the next 3- 4 weeks.",
      "parentUuid": "d0ba0784_ef9beee2",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "074752e5_9e777df6",
        "filename": "lib/attestation/src/attestation_token.c",
        "patchSetId": 9
      },
      "lineNbr": 347,
      "author": {
        "id": 1000114
      },
      "writtenOn": "2024-07-22T17:30:42Z",
      "side": 1,
      "message": "thx for heads up.",
      "parentUuid": "26737b32_11cc844f",
      "revId": "ba25ac31f393834298e82f194fd9a41372863163",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}