{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d102311e_461545a0",
        "filename": "cmake/CommonConfigs.cmake",
        "patchSetId": 5
      },
      "lineNbr": 58,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "add documentation for this in userguide.",
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "185b9a53_207eed60",
        "filename": "cmake/CommonConfigs.cmake",
        "patchSetId": 5
      },
      "lineNbr": 59,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "\"RMM_CCA_TOKEN_BUFFER\"",
      "range": {
        "startLine": 59,
        "startChar": 9,
        "endLine": 59,
        "endChar": 32
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54dc42ea_ed38bfec",
        "filename": "cmake/CommonConfigs.cmake",
        "patchSetId": 5
      },
      "lineNbr": 60,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "\"Number of pages to allocate in Aux granule for Realm CCA token\"",
      "range": {
        "startLine": 60,
        "startChar": 10,
        "endLine": 60,
        "endChar": 17
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9bd3b536_5a1feec3",
        "filename": "lib/attestation/include/attestation_token.h",
        "patchSetId": 5
      },
      "lineNbr": 87,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "set",
      "range": {
        "startLine": 87,
        "startChar": 9,
        "endLine": 87,
        "endChar": 14
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43f2e420_5982b856",
        "filename": "lib/attestation/include/attestation_token.h",
        "patchSetId": 5
      },
      "lineNbr": 88,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "maybe cca_token_len",
      "range": {
        "startLine": 88,
        "startChar": 8,
        "endLine": 88,
        "endChar": 17
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a1961ef_07e5ebe3",
        "filename": "lib/attestation/include/attestation_token.h",
        "patchSetId": 5
      },
      "lineNbr": 89,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "Maybe something more specific, like \u0027Number of CCA token bytes returned to the realm\u0027",
      "range": {
        "startLine": 89,
        "startChar": 4,
        "endLine": 89,
        "endChar": 26
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7814b54a_6b743da4",
        "filename": "lib/realm/include/rec.h",
        "patchSetId": 5
      },
      "lineNbr": 136,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "Maybe cca_attest_token_buffer",
      "range": {
        "startLine": 136,
        "startChar": 10,
        "endLine": 136,
        "endChar": 23
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7f16db9_6b5e4b7d",
        "filename": "plat/host/host_build/src/host_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 28,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "This should probably be called ATTEST_TOKEN_BUFFER_SIZE as the thing that is referred in this code as realm buffer has the size of a granule",
      "range": {
        "startLine": 28,
        "startChar": 8,
        "endLine": 28,
        "endChar": 25
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ab154843_85b66ca6",
        "filename": "plat/host/host_build/src/host_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 142,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "The sample app needs to only do this once. Can remove the 2nd token init and continue.",
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "600076bc_83533e63",
        "filename": "plat/host/host_build/src/host_setup.c",
        "patchSetId": 5
      },
      "lineNbr": 240,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "maybe adding an assert here that the sum of granules allocated here are greater (or equal) than REALM_BUFFER_SIZE/ATTEST_TOKEN_BUFFER_SIZE",
      "range": {
        "startLine": 238,
        "startChar": 0,
        "endLine": 240,
        "endChar": 20
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f56e0b2_fb3d963f",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 82,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "call this rec_attest_buffer",
      "range": {
        "startLine": 82,
        "startChar": 10,
        "endLine": 82,
        "endChar": 20
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e34587e0_ee81288d",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 112,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "if size is 0, then the copied_len will remain 0 even if the token is created in first call. \n\n2 options:\n\n1. return early if size is 0 without any operation (preferable ?)\n2. Need another state variable for CCA TOKEN creation.\n\n\nAlso there is an optimization that\n\nif !(`size` \u003c REC_ATTEST_BUFFER_SIZE), then we could use realm_att_token as the destination buffer directly and avoid another memcpy.\n\nif the implementation becomes convoluted, ignore the 2nd optimization.",
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f2b84b4_ac12b97d",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 137,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "these types should be uintptr_t in first place. same comment for realm_att_token.",
      "range": {
        "startLine": 137,
        "startChar": 27,
        "endLine": 137,
        "endChar": 37
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ba52ceb_699b747d",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 259,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "need to ensure size is also less than GRANULE_SIZE (check eac5)",
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b9bf4ae_43460313",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 259,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:24:45Z",
      "side": 1,
      "message": "This failure case should be checked :\n\nsize_overflow pre: offset + size \u003c offset",
      "parentUuid": "4ba52ceb_699b747d",
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c306b5c6_a1a6cbd8",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 275,
      "author": {
        "id": 1000056
      },
      "writtenOn": "2023-10-10T03:17:06Z",
      "side": 1,
      "message": "this can be replaced with:\n\n\nif(!addr_in_rec_par(rec, realm_buf_ipa)) {\n   res-\u003esmc_res.x[0] \u003d RSI_ERROR_INPUT;\n   return;\n}\n\n\nno need to acquire any locks.",
      "range": {
        "startLine": 264,
        "startChar": 1,
        "endLine": 275,
        "endChar": 38
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fe208f84_dcf8e9ad",
        "filename": "runtime/rsi/realm_attest.c",
        "patchSetId": 5
      },
      "lineNbr": 303,
      "author": {
        "id": 1000010
      },
      "writtenOn": "2023-10-10T13:03:17Z",
      "side": 1,
      "message": "In the previous version if the token generation was in ATTEST_SIGN_IN_PROGRESS state, and the crypto signing operation returned not-complete, and there was no pending IRQ, the logic automatically executed the next iteration without returning to the realm with incomplete. \n\nThis now seems to be changed, the implementation always returns to the realm (or the host if there is interrupt.). Is this on purpose?",
      "range": {
        "startLine": 302,
        "startChar": 1,
        "endLine": 303,
        "endChar": 27
      },
      "revId": "6be8b0077865ba89488c8f96bae427af191be75e",
      "serverId": "8f6f209b-db1a-4cbf-aa44-c8bc30e9bfda"
    }
  ]
}